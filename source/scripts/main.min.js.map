{"version":3,"sources":["../_js/_model-launch.js","../_js/init.js","../_js/_model-template.js"],"names":["elementHasClass","className","event","currentTarget","classList","contains","ajaxRequest","url","callback","request","XMLHttpRequest","open","onload","status","responseText","send","parseHTML","htmlString","html","document","implementation","createHTMLDocument","documentElement","innerHTML","body","LaunchModel","module","this","selector","launch-button","model-template","model-window","originModule","storeTemplate","bindEvents","prototype","module_template","querySelector","modelWindowTemplate","content","instance","launch_button_event","handleEvent","preventDefault","createModel","launchButton","addEventListener","launchHref","href","ModelTemplate","model-close","model-active","model-content","setPage","defineElements","add","appendModel","addContent","create_model","createElement","parentNode","insertAdjacentHTML","modelWindow","closeButton","modelContent","close_button_event","closeModel","full_url","split","page_url","fragment_selector","data","html_fragment","appendChild","removeModel","resetPage","removeChild","remove","String","capitalizeFirstLetter","charAt","toUpperCase","slice","window","module_array","querySelectorAll","forEach","call","new_object","getAttribute"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict';\n/**\n * Launches full page model.\n *\n * @constructor\n * @param {object} the origin module that launches the model\n */\nvar LaunchModel = function (module) {\n\n    // selectors\n    this.selector = {\n        'launch-button': 'js-model__launch',\n        'model-template': 'js-model-template',\n        'model-window': 'js-model-template__window',\n    }\n\n    this.originModule = module;\n    this.storeTemplate()\n    this.bindEvents();\n}\n\n/**\n * Fetch and keep model template in memory.\n *\n */\nLaunchModel.prototype.storeTemplate = function () {\n\n    var module_template = document.querySelector('#' + this.selector['model-template']);\n    this.modelWindowTemplate = module_template.content.querySelector('.' + this.selector['model-window']);\n}\n\n/**\n * Attach all events.\n *\n */\nLaunchModel.prototype.bindEvents = function () {\n    var instance = this;\n\n    var launch_button_event = {\n        handleEvent: function(event) {\n            event.preventDefault();\n            instance.createModel();\n        }\n    }\n\n    this.launchButton = this.originModule.querySelector('.' + this.selector['launch-button']);\n    this.launchButton.addEventListener('click', launch_button_event);\n}\n\n/**\n * Create a model.\n *\n * @return {object} ModelTemplate - The appended model.\n */\nLaunchModel.prototype.createModel = function () {\n\n    this.launchHref = this.launchButton.href;\n    new ModelTemplate (this);\n}\n","'use strict';\n\n// UTIL\n// ADD ES6 module patteren please!\n\n// capitalize first letter of a string\nString.prototype.capitalizeFirstLetter = function () {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n}\n\nfunction elementHasClass (className) {\n    return event.currentTarget.classList.contains(className);\n}\n\nfunction ajaxRequest (url, callback) {\n\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n\n    request.onload = function() {\n        if (request.status >= 200 && request.status < 400) {\n            callback(request.responseText);\n        }\n    };\n    request.send();\n}\n\nfunction parseHTML (htmlString) {\n    var html = document.implementation.createHTMLDocument(\"example\");\n    html.documentElement.innerHTML = htmlString;\n    return html.body;\n}\n\n// INIT\n// after page load\nwindow.onload = function () {\n\n    // find all data js\n    var module_array = document.querySelectorAll('[data-js-init]');\n\n    // for each data attribue\n    [].forEach.call(module_array, function (module) {\n\n        // get js module name\n        var new_object = module.getAttribute('data-js-init').capitalizeFirstLetter();\n\n        // start\n        new window[new_object](module);\n\n    });\n};\n","'use strict';\n\n/**\n* Builds full page model from template stored on current page.\n*\n* @constructor\n* @param {LaunchModel} LaunchModel class - Dependency injection.\n*/\nvar ModelTemplate = function (LaunchModel) {\n\n    // dependency injection class\n    this.LaunchModel = LaunchModel;\n\n    // selectors\n    this.selector = {\n        'model-window': 'js-model-template__window',\n        'model-close': 'js-model-template__close',\n        'model-active': 'model__active',\n        'model-content': 'js-model-template__content'\n    }\n\n    // go to work\n    this.setPage();\n    this.createModel(this.defineElements, this.bindEvents);\n}\n\n/**\n* Set page styling for takeover style model.\n*\n*/\nModelTemplate.prototype.setPage = function () {\n    document.body.classList.add(this.selector['model-active']);\n}\n\n/**\n* Control functions that create model and setup page.\n*\n* @param {functionCallback} defineElements - Store created elements to instance.\n* @param {functionCallback} bindEvents - Bind events to created elements.\n*/\nModelTemplate.prototype.createModel = function (defineElements, bindEvents) {\n\n    this.appendModel();\n    this.defineElements();\n    this.bindEvents();\n    this.addContent();\n}\n\n/**\n* Append model to page.\n*\n*/\nModelTemplate.prototype.appendModel = function () {\n\n    var create_model = document.createElement('div');\n    create_model = this.LaunchModel.modelWindowTemplate.parentNode.innerHTML;\n    document.body.insertAdjacentHTML('afterbegin', create_model);\n}\n\n/**\n* Store created elements to instance.\n*\n*/\nModelTemplate.prototype.defineElements = function () {\n\n    this.modelWindow = document.querySelector('.' + this.selector['model-window']);\n    this.closeButton = this.modelWindow.querySelector('.' + this.selector['model-close']);\n    this.modelContent = this.modelWindow.querySelector('.' + this.selector['model-content']);\n}\n\n/**\n* Bind events to created elements - Using a handleEvent object to configure the function call.\n*\n*/\nModelTemplate.prototype.bindEvents = function () {\n    var instance = this;\n\n    var close_button_event = {\n        handleEvent: function(event) {\n            event.preventDefault();\n            instance.closeModel();\n        }\n    }\n\n    this.closeButton.addEventListener('click', close_button_event);\n}\n\n/**\n* Get content via Ajax and place in model window.\n*\n*/\nModelTemplate.prototype.addContent = function () {\n    var instance = this;\n\n    // get parts from href string\n    var full_url = this.LaunchModel.launchHref.split('#');\n    var page_url = full_url[0];\n    var fragment_selector = full_url[1];\n\n    // ajax (util function)\n    ajaxRequest(page_url, function(data){\n\n        // parse (util function), and append\n        var html = parseHTML(data);\n        var html_fragment = html.querySelector('.' + fragment_selector);\n\n        instance.modelContent.appendChild(html_fragment);\n    });\n}\n\n/**\n* Control functions that remove model and reset page\n*\n*/\nModelTemplate.prototype.closeModel = function () {\n    this.removeModel();\n    this.resetPage();\n}\n\n/**\n* Remove model HTML.\n*\n*/\nModelTemplate.prototype.removeModel = function () {\n    this.modelWindow.parentNode.removeChild(this.modelWindow);\n}\n\n/**\n* Reset page styling.\n*\n*/\nModelTemplate.prototype.resetPage = function () {\n    document.body.classList.remove(this.selector['model-active']);\n}\n"]}