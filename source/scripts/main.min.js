(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

// init modules

var _modelLaunch = require('./modules/model-launch');

var _contactForm = require('./modules/contact-form');

// init class list
var modules = {
    model: _modelLaunch.ModelLaunch,
    contact: _contactForm.ContactForm
};

/**
* Initalize requiried JS from data attribures found in page HTML.
*
* @param {object} window - Global object referance.
* @param {object} document - Document object referance.
* @param {object} undefined - Ensure undefined remains valueless.
*/
(function (window, document, undefined) {

    // find all data js
    var moduleArray = document.querySelectorAll('[data-init]');

    // for each data attribue
    Array.from(moduleArray).forEach(function (module) {
        // get class name
        var className = module.getAttribute('data-init');

        // instantiate
        var moduleInstance = new modules[className](module);
        moduleInstance.init();
    });
})(window, document);

},{"./modules/contact-form":2,"./modules/model-launch":3}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ContactForm = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Dependencies
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */


var _ajax = require('../utilities/ajax');

var _parsehtml = require('../utilities/parsehtml');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Module settings
 */
var defaults = {
    selectors: {
        direct_link: 'js-contact--link',
        confirm_input: 'js-contact--confirm',
        submit_button: 'js-contact--submit',
        contact_section: 'js-contact--section'
    },
    email: {
        first: 'bower.patrick',
        last: 'gmail.com'
    }
};

/**
 * Enhance the contact form.
 *
 * @module Contact Form
 * @class ContactForm
 */

var ContactForm = exports.ContactForm = function () {

    /**
     * Launches full page model.
     *
     * @constructor
     * @param {object} the origin module that launches the model
     */

    function ContactForm(context) {
        _classCallCheck(this, ContactForm);

        this.context = context;

        // settings
        this.formAction = this.context.action;
    }

    /**
     * Initalise and setup at runtime.
     *
     * @function init
     */


    _createClass(ContactForm, [{
        key: 'init',
        value: function init() {
            // setup
            this.addEmail();
            this.hiddenInput();
            this.bindEvents();
        }

        /**
         * Add direct email address button to limit spaming bots.
         *
         * @function addEmail
         */

    }, {
        key: 'addEmail',
        value: function addEmail() {

            // construct button
            var anchor = document.createElement('a');
            anchor.setAttribute('class', 'button button--mineshaft-lighten');
            anchor.setAttribute('href', 'mailto:' + defaults.email.first + '@' + defaults.email.last);
            anchor.innerText = defaults.email.first + '@' + defaults.email.last;

            // append button
            var direct_link = document.querySelector('.' + defaults.selectors.direct_link);
            direct_link.appendChild(anchor);
        }

        /**
         * Add event listners where requiried.
         *
         * @function bindEvents
         */

    }, {
        key: 'bindEvents',
        value: function bindEvents() {
            var instance = this;

            // submit button to send form
            var submit_form_event = {
                handleEvent: function handleEvent(event) {
                    event.preventDefault();
                    instance.submitForm();
                }
            };

            var submit_button = this.context.querySelector('.' + defaults.selectors.submit_button);
            submit_button.addEventListener('click', submit_form_event);
        }

        /**
         * Prevent tabbing into hidden input placed to encourage spam bots.
         *
         * @function hiddenInput
         * @param contactForm - The module html.
         */

    }, {
        key: 'hiddenInput',
        value: function hiddenInput() {
            var confirm = this.context.querySelector('.' + defaults.selectors.confirm_input);
            confirm.tabIndex = -1;
        }

        /**
        * Get content via Ajax.
        *
        * @function submitForm
        * @requires {function} ajaxRequest
        * @requires {function} parseHTML
        */

    }, {
        key: 'submitForm',
        value: function submitForm() {
            var _this = this;

            // get parts from href string

            var _formAction$split = this.formAction.split('#');

            var _formAction$split2 = _slicedToArray(_formAction$split, 2);

            var page_url = _formAction$split2[0];
            var fragment_selector = _formAction$split2[1];

            // ajax (util function)

            (0, _ajax.ajaxRequest)(page_url, function (data) {

                // parse (util function), and append
                var html = (0, _parsehtml.parseHTML)(data);
                _this.htmlFragment = html.querySelector('.' + fragment_selector);

                _this.confirmSubmit();
                _this.confirmHeading();
            });
        }

        /**
         * Replace contact form with confermation message.
         *
         */

    }, {
        key: 'confirmSubmit',
        value: function confirmSubmit() {

            var contact_section = document.querySelector('.' + defaults.selectors.contact_section);
            contact_section.insertAdjacentHTML('beforebegin', this.htmlFragment.innerHTML);
            contact_section.remove();
        }

        /**
         * Replace heading string with witty retort.
         *
         */

    }, {
        key: 'confirmHeading',
        value: function confirmHeading() {

            document.querySelector('h1').innerText = 'Said hello';
        }
    }]);

    return ContactForm;
}();

},{"../utilities/ajax":5,"../utilities/parsehtml":7}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ModelLaunch = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Dependencies
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */


var _modelWindow = require('../modules/model-window');

var _breakpoint = require('../utilities/breakpoint');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Module settings
 */
var defaults = {
    selectors: {
        launch_button: 'js-model--launch',
        model_template: 'js-model-template',
        model_window: 'js-model-template--window'
    }
};

/**
 * Setup and get params from source markup ready to launch model.
 *
 * @module Model Launch
 * @class ModelLaunch
 */

var ModelLaunch = exports.ModelLaunch = function () {

    /**
     * Launches full page model.
     *
     * @constructor
     * @param {object} the origin module that launches the model
     */

    function ModelLaunch(context) {
        _classCallCheck(this, ModelLaunch);

        this.context = context;
    }

    _createClass(ModelLaunch, [{
        key: 'init',


        /**
         * initalise
         *
         */
        value: function init() {

            // set defaults
            this.modelLayout = false;

            // setup
            this.getLayout();
            this.storeTemplate();
            this.bindEvents();
        }
    }, {
        key: 'getLayout',


        /**
         * Model should only be shown for desktop - mobile should link to page
         *
         * @requires {function} breakpoint
         */
        value: function getLayout() {

            var layout = (0, _breakpoint.breakpoint)();
            if (layout.value === 'desktop') this.modelLayout = true;
        }

        /**
         * Fetch and keep model template in memory.
         *
         */

    }, {
        key: 'storeTemplate',
        value: function storeTemplate() {

            var module_template = document.querySelector('#' + defaults.selectors.model_template);
            this.modelWindowTemplate = module_template.content.querySelector('.' + defaults.selectors.model_window);
        }
    }, {
        key: 'bindEvents',


        /**
         * Add event handlers.
         *
         */
        value: function bindEvents() {
            var instance = this;

            // check breakpoint on window resize
            var window_resize_event = {
                handleEvent: function handleEvent(event) {
                    instance.getLayout();
                }
            };

            window.addEventListener('resize', window_resize_event);

            // launch via button
            var launch_button_event = {
                handleEvent: function handleEvent(event) {

                    // link directly to page
                    if (instance.modelLayout === false) {
                        return;

                        // or display in model
                    } else {
                            event.preventDefault();
                            instance.createModel();
                        }
                }
            };

            this.launchButton = this.context.querySelector('.' + defaults.selectors.launch_button);
            this.launchButton.addEventListener('click', launch_button_event);
        }
    }, {
        key: 'createModel',


        /**
         * Create a model.
         *
         * @requires {object} ModelWindow.
         */
        value: function createModel() {

            // url and id
            this.launchHref = this.launchButton.href;

            // create new model
            var moduleInstance = new _modelWindow.ModelWindow(this);
            moduleInstance.init();
        }
    }]);

    return ModelLaunch;
}();

},{"../modules/model-window":4,"../utilities/breakpoint":6}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ModelWindow = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Dependencies
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */


var _ajax = require('../utilities/ajax');

var _parsehtml = require('../utilities/parsehtml');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Module settings
 */
var defaults = {
    selectors: {
        model_window: 'js-model-template--window',
        model_close: 'js-model-template--close',
        model_active: 'model--active',
        model_content: 'js-model-template--content'
    }
};

/**
 * @class ModelWindow - Appended template element to body of ModelLaunch source page
 * with content taken from the target page via an ajax request.
 *
 * @extends {object} ModelLaunch
 */

var ModelWindow = exports.ModelWindow = function () {

    /**
     * @constructor
     * @param {object} the origin module that launches the model
     */

    function ModelWindow(ModelLaunch) {
        _classCallCheck(this, ModelWindow);

        // dependency injection
        this.ModelLaunch = ModelLaunch;
    }

    /**
     * initalise
     *
     */


    _createClass(ModelWindow, [{
        key: 'init',
        value: function init() {

            this.setPage();
            this.createModel(this.defineElements, this.bindEvents);
        }

        /**
        * Set page styling for takeover style model.
        *
        */

    }, {
        key: 'setPage',
        value: function setPage() {
            document.body.classList.add(defaults.selectors.model_active);
        }

        /**
        * Control functions that create model and setup page.
        *
        * @param {functionCallback} defineElements - Store created elements to instance.
        * @param {functionCallback} bindEvents - Bind events to created elements.
        */

    }, {
        key: 'createModel',
        value: function createModel(defineElements, bindEvents) {

            this.appendModel();
            this.defineElements();
            this.bindEvents();
            this.addContent();
        }

        /**
        * Append model to page.
        *
        */

    }, {
        key: 'appendModel',
        value: function appendModel() {

            var create_model = document.createElement('div');
            create_model = this.ModelLaunch.modelWindowTemplate.parentNode.innerHTML;
            document.body.insertAdjacentHTML('afterbegin', create_model);
        }

        /**
        * Store created elements to instance.
        *
        */

    }, {
        key: 'defineElements',
        value: function defineElements() {

            this.modelWindow = document.querySelector('.' + defaults.selectors.model_window);
            this.closeButton = this.modelWindow.querySelector('.' + defaults.selectors.model_close);
            this.modelContent = this.modelWindow.querySelector('.' + defaults.selectors.model_content);
        }

        /**
        * Bind events to created elements - Using a handleEvent object to configure the function call.
        *
        */

    }, {
        key: 'bindEvents',
        value: function bindEvents() {
            var instance = this;

            var close_button_event = {
                handleEvent: function handleEvent(event) {
                    event.preventDefault();
                    instance.closeModel();
                }
            };

            this.closeButton.addEventListener('click', close_button_event);
        }

        /**
        * Get content via Ajax and place in model window.
        *
        * @requires {function} ajaxRequest
        * @requires {function} parseHTML
        */

    }, {
        key: 'addContent',
        value: function addContent() {
            var instance = this;

            // get parts from href string

            var _ModelLaunch$launchHr = this.ModelLaunch.launchHref.split('#');

            var _ModelLaunch$launchHr2 = _slicedToArray(_ModelLaunch$launchHr, 2);

            var page_url = _ModelLaunch$launchHr2[0];
            var fragment_selector = _ModelLaunch$launchHr2[1];

            // ajax (util function)

            (0, _ajax.ajaxRequest)(page_url, function (data) {

                console.log(fragment_selector);

                var html = (0, _parsehtml.parseHTML)(data);
                var html_fragment = html.querySelector('.' + fragment_selector);

                instance.modelContent.appendChild(html_fragment);
            });
        }

        /**
        * Control functions that remove model and reset page
        *
        */

    }, {
        key: 'closeModel',
        value: function closeModel() {
            this.removeModel();
            this.resetPage();
        }

        /**
        * Remove model HTML.
        *
        */

    }, {
        key: 'removeModel',
        value: function removeModel() {
            this.modelWindow.parentNode.removeChild(this.modelWindow);
        }

        /**
        * Reset page styling.
        *
        */

    }, {
        key: 'resetPage',
        value: function resetPage() {
            document.body.classList.remove(defaults.selectors.model_active);
        }
    }]);

    return ModelWindow;
}();

},{"../utilities/ajax":5,"../utilities/parsehtml":7}],5:[function(require,module,exports){
'use strict';

/**
* Simple XHR utility.
*
* @param {string} url - The request source.
* @param {callback} callback - The callback of data recieved.
*/

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ajaxRequest = ajaxRequest;
function ajaxRequest(url, callback) {

    var request = new XMLHttpRequest();
    request.open('GET', url, true);

    request.onload = function () {
        if (request.status >= 200 && request.status < 400) {
            callback(request.responseText);
        }
    };

    request.send();
}

},{}],6:[function(require,module,exports){
'use strict';

/**
* Get the breakpoint set on :before of the body by CSS.
*
* @return {string} Breakpoint value.
*/

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.breakpoint = breakpoint;
function breakpoint() {

    var breakpoint = {};
    breakpoint.value = window.getComputedStyle(document.querySelector('body'), ':before').getPropertyValue('content').replace(/\"/g, '');

    return breakpoint;
};

},{}],7:[function(require,module,exports){
'use strict';

/**
* Simple HTML parser utility.
*
* @param {string} url - The request source.
* @param {callback} callback - The callback of data recieved.
*/

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseHTML = parseHTML;
function parseHTML(htmlString) {

    var html = document.implementation.createHTMLDocument("example");

    html.documentElement.innerHTML = htmlString;
    return html.body;
}

},{}]},{},[1]);
