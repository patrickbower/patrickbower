(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

// init modules

var _modellaunch = require('./modules/modellaunch');

var _contactform = require('./modules/contactform');

// init class list
var modules = {
    model: _modellaunch.ModelLaunch,
    contact: _contactform.ContactForm
};

/**
* Initalize requiried JS from data attribures found in page HTML.
*
* @param {object} window - Global object referance.
* @param {object} document - Document object referance.
* @param {object} undefined - Ensure undefined remains valueless.
*/
(function (window, document, undefined) {

    // find all data js
    var moduleArray = document.querySelectorAll('[data-init]');

    // for each data attribue
    Array.from(moduleArray).forEach(function (module) {
        // get class name
        var className = module.getAttribute('data-init');

        // instantiate
        var moduleInstance = new modules[className](module);
        moduleInstance.init();
    });
})(window, document);

},{"./modules/contactform":2,"./modules/modellaunch":3}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ContactForm = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ajax = require('../utilities/ajax');

var _parsehtml = require('../utilities/parsehtml');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// selectors
var selectors = {
    directLink: 'js-contact__direct-link',
    confirmInput: 'js-contact__input-confirm',
    submitButton: 'js-contact-submit',
    contactSection: 'js-contact__section'
};

/**
 * Setup and enhance the contact form module.
 *
 * @module Contact Form
 * @class ContactForm
 */

var ContactForm = exports.ContactForm = function () {

    /**
     * Launches full page model.
     *
     * @constructor
     * @param {object} the origin module that launches the model
     */

    function ContactForm(context) {
        _classCallCheck(this, ContactForm);

        this.context = context;

        // settings
        this.formAction = this.context.action;
    }

    _createClass(ContactForm, [{
        key: 'init',


        /**
         * Initalise and setup at runtime.
         *
         * @function init
         */
        value: function init() {
            // setup
            this.addEmail();
            hiddenInput(this);
            this.bindEvents();
        }
    }, {
        key: 'addEmail',


        /**
         * Add direct email address button to limit spaming bots.
         *
         * @function addEmail
         */
        value: function addEmail() {

            // parts
            var first = 'bower.patrick';
            var last = 'gmail.com';
            var directLink = document.querySelector('.' + selector.directLink);
            /*
                    const anchor = document.createElement('a');
                    anchor.className = 'button button--mineshaft-lighten';
            
                    `<a>${first}@${last}</a>`
            */
            var markup = '<a class="button button--mineshaft-lighten" href="mailto:' + first + '@' + last + '">' + first + '@' + last + '<\/a>';

            // append button
            directLink.insertAdjacentHTML('afterBegin', markup);
        }

        /**
         * Add event listners where requiried.
         *
         * @function bindEvents
         */

    }, {
        key: 'bindEvents',
        value: function bindEvents() {
            var instance = this;

            // submit button to send form
            var submit_form_event = {
                handleEvent: function handleEvent(event) {
                    event.preventDefault();
                    instance.submitForm();
                }
            };

            var submitButton = this.context.querySelector('.' + this.selector.submitButton);
            submitButton.addEventListener('click', submit_form_event);
        }
    }, {
        key: 'submitForm',


        /**
        * Get content via Ajax.
        *
        * @function submitForm
        * @requires {function} ajaxRequest
        * @requires {function} parseHTML
        */
        value: function submitForm() {
            var _this = this;

            // get parts from href string
            var full_path = this.formAction.split('#');
            var page_url = full_path[0];
            var fragment_selector = full_path[1];

            // const [page_url, fragment_selector] = this.formAction.split('#');

            // ajax (util function)
            (0, _ajax.ajaxRequest)(page_url, function (data) {

                // parse (util function), and append
                var html = (0, _parsehtml.parseHTML)(data);
                _this.htmlFragment = html.querySelector('.' + fragment_selector);

                _this.confirmSubmit();
                _this.confirmHeading();
            });
        }

        /**
         * Replace contact form with confermation message.
         *
         */

    }, {
        key: 'confirmSubmit',
        value: function confirmSubmit() {

            var contactSection = document.querySelector('.' + this.selector.contactSection);
            contactSection.insertAdjacentHTML('beforebegin', this.htmlFragment.innerHTML);
            contactSection.remove();
        }

        /**
         * Replace heading string with witty retort.
         *
         */

    }, {
        key: 'confirmHeading',
        value: function confirmHeading() {

            document.querySelector('h1').innerText = 'Said hello';
        }
    }]);

    return ContactForm;
}();

},{"../utilities/ajax":5,"../utilities/parsehtml":7}],3:[function(require,module,exports){
'use strict';

/**
 * @class ModelLaunch - Setup and get params from source markup ready to launch model.
 *
 * @requires {object} ModelWindow.
 * @requires {function} layout.
 */

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ModelLaunch = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _modelwindow = require('../modules/modelwindow');

var _breakpoint = require('../utilities/breakpoint');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ModelLaunch = exports.ModelLaunch = function () {

    /**
     * Launches full page model.
     *
     * @constructor
     * @param {object} the origin module that launches the model
     */

    function ModelLaunch(context) {
        _classCallCheck(this, ModelLaunch);

        // module markup
        this.context = context;
    }

    _createClass(ModelLaunch, [{
        key: 'init',


        /**
         * initalise
         *
         */
        value: function init() {

            // selectors
            this.selector = {
                'launch-button': 'js-model__launch',
                'model-template': 'js-model-template',
                'model-window': 'js-model-template__window'
            };

            // setup
            this.getLayout();
            this.storeTemplate();
            this.bindEvents();
        }
    }, {
        key: 'getLayout',


        /**
         * Model should only be shown for desktop - mobile should link to page
         *
         */
        value: function getLayout() {

            var layout = (0, _breakpoint.breakpoint)();

            if (layout.value === 'mobile' || layout.value === 'tablet') {
                this.modelLayout = false;
            } else {
                this.modelLayout = true;
            }
        }

        /**
         * Fetch and keep model template in memory.
         *
         */

    }, {
        key: 'storeTemplate',
        value: function storeTemplate() {

            var module_template = document.querySelector('#' + this.selector['model-template']);
            this.modelWindowTemplate = module_template.content.querySelector('.' + this.selector['model-window']);
        }
    }, {
        key: 'bindEvents',


        /**
         * Add event handlers.
         *
         */
        value: function bindEvents() {
            var instance = this;

            // check breakpoint on window resize
            var window_resize_event = {
                handleEvent: function handleEvent(event) {
                    instance.getLayout();
                }
            };

            window.addEventListener('resize', window_resize_event);

            // launch via button
            var launch_button_event = {
                handleEvent: function handleEvent(event) {

                    // link directly to page
                    if (instance.modelLayout === false) {
                        return;

                        // or display in model
                    } else {
                            event.preventDefault();
                            instance.createModel();
                        }
                }
            };

            this.launchButton = this.context.querySelector('.' + this.selector['launch-button']);
            this.launchButton.addEventListener('click', launch_button_event);
        }
    }, {
        key: 'createModel',


        /**
         * Create a model.
         *
         * @return {object} ModelTemplate - The appended model.
         */
        value: function createModel() {

            // url and id
            this.launchHref = this.launchButton.href;

            // create new model
            var moduleInstance = new _modelwindow.ModelWindow(this);
            moduleInstance.init();
        }
    }]);

    return ModelLaunch;
}();

},{"../modules/modelwindow":4,"../utilities/breakpoint":6}],4:[function(require,module,exports){
'use strict';

/**
 * @class ModelWindow - Appended template element to body of ModelLaunch source page
 * with content taken from the target page via an ajax request.
 *
 * @extends {object} ModelLaunch
 * @requires {function} ajaxRequest
 * @requires {function} parseHTML
 */

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ModelWindow = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ajax = require('../utilities/ajax');

var _parsehtml = require('../utilities/parsehtml');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ModelWindow = exports.ModelWindow = function () {

    /**
     * Launches full page model.
     *
     * @constructor
     * @param {object} the origin module that launches the model
     */

    function ModelWindow(ModelLaunch) {
        _classCallCheck(this, ModelWindow);

        // dependency injection
        this.ModelLaunch = ModelLaunch;
    }

    _createClass(ModelWindow, [{
        key: 'init',


        /**
         * initalise
         *
         */
        value: function init() {

            // selectors
            this.selector = {
                'model-window': 'js-model-template__window',
                'model-close': 'js-model-template__close',
                'model-active': 'model__active',
                'model-content': 'js-model-template__content'
            };

            // go to work
            this.setPage();
            this.createModel(this.defineElements, this.bindEvents);
        }
    }, {
        key: 'setPage',


        /**
        * Set page styling for takeover style model.
        *
        */
        value: function setPage() {
            document.body.classList.add(this.selector['model-active']);
        }
    }, {
        key: 'createModel',


        /**
        * Control functions that create model and setup page.
        *
        * @param {functionCallback} defineElements - Store created elements to instance.
        * @param {functionCallback} bindEvents - Bind events to created elements.
        */
        value: function createModel(defineElements, bindEvents) {

            this.appendModel();
            this.defineElements();
            this.bindEvents();
            this.addContent();
        }
    }, {
        key: 'appendModel',


        /**
        * Append model to page.
        *
        */
        value: function appendModel() {

            var create_model = document.createElement('div');
            create_model = this.ModelLaunch.modelWindowTemplate.parentNode.innerHTML;
            document.body.insertAdjacentHTML('afterbegin', create_model);
        }
    }, {
        key: 'defineElements',


        /**
        * Store created elements to instance.
        *
        */
        value: function defineElements() {

            this.modelWindow = document.querySelector('.' + this.selector['model-window']);
            this.closeButton = this.modelWindow.querySelector('.' + this.selector['model-close']);
            this.modelContent = this.modelWindow.querySelector('.' + this.selector['model-content']);
        }
    }, {
        key: 'bindEvents',


        /**
        * Bind events to created elements - Using a handleEvent object to configure the function call.
        *
        */
        value: function bindEvents() {
            var instance = this;

            var close_button_event = {
                handleEvent: function handleEvent(event) {
                    event.preventDefault();
                    instance.closeModel();
                }
            };

            this.closeButton.addEventListener('click', close_button_event);
        }
    }, {
        key: 'addContent',


        /**
        * Get content via Ajax and place in model window.
        *
        * @requires {function} ajaxRequest
        * @requires {function} parseHTML
        */
        value: function addContent() {
            var instance = this;

            // get parts from href string
            var full_path = this.ModelLaunch.launchHref.split('#');
            var page_url = full_path[0];
            var fragment_selector = full_path[1];

            // ajax (util function)
            (0, _ajax.ajaxRequest)(page_url, function (data) {

                // parse (util function), and append
                var html = (0, _parsehtml.parseHTML)(data);
                var html_fragment = html.querySelector('.' + fragment_selector);

                instance.modelContent.appendChild(html_fragment);
            });
        }
    }, {
        key: 'closeModel',


        /**
        * Control functions that remove model and reset page
        *
        */
        value: function closeModel() {
            this.removeModel();
            this.resetPage();
        }
    }, {
        key: 'removeModel',


        /**
        * Remove model HTML.
        *
        */
        value: function removeModel() {
            this.modelWindow.parentNode.removeChild(this.modelWindow);
        }
    }, {
        key: 'resetPage',


        /**
        * Reset page styling.
        *
        */
        value: function resetPage() {
            document.body.classList.remove(this.selector['model-active']);
        }
    }]);

    return ModelWindow;
}();

},{"../utilities/ajax":5,"../utilities/parsehtml":7}],5:[function(require,module,exports){
'use strict';

/**
* Simple XHR utility.
*
* @param {string} url - The request source.
* @param {callback} callback - The callback of data recieved.
*/

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ajaxRequest = ajaxRequest;
function ajaxRequest(url, callback) {

    var request = new XMLHttpRequest();
    request.open('GET', url, true);

    request.onload = function () {
        if (request.status >= 200 && request.status < 400) {
            callback(request.responseText);
        }
    };

    request.send();
}

},{}],6:[function(require,module,exports){
'use strict';

/**
* Get the breakpoint set on :before of the body by CSS.
*
* @return {string} Breakpoint value.
*/

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.breakpoint = breakpoint;
function breakpoint() {

    var breakpoint = {};
    breakpoint.value = window.getComputedStyle(document.querySelector('body'), ':before').getPropertyValue('content').replace(/\"/g, '');

    return breakpoint;
};

},{}],7:[function(require,module,exports){
'use strict';

/**
* Simple HTML parser utility.
*
* @param {string} url - The request source.
* @param {callback} callback - The callback of data recieved.
*/

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseHTML = parseHTML;
function parseHTML(htmlString) {

    var html = document.implementation.createHTMLDocument("example");

    html.documentElement.innerHTML = htmlString;
    return html.body;
}

},{}]},{},[1]);
